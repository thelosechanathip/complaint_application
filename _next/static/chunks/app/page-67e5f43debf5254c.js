(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3924:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var l=t(5155),a=t(3464);a.A.defaults.baseURL="https://akathos.moph.go.th/api/";let i=a.A;var n=t(7881),r=t(8883),m=t(9420),d=t(4276),c=t(2501),o=t(8395),x=t(2398),u=t(5657),p=t(3872),h=t(2115),f=t(5799),w=t(4567),g=t.n(w),j=t(2676);function b(){return(0,l.jsxs)("div",{className:"w-full h-screen flex flex-col justify-center items-center",children:[(0,l.jsx)(j.p,{strokeWidth:"5",style:{width:"60px",height:"60px"},animationDuration:"1.5s"}),(0,l.jsx)("p",{className:"text-green-800 mt-3 font-bold drop-shadow-md",children:"กำลังโหลดข้อมูล.."})]})}var v=t(5695),y=t(2525);function N(e){let{openModalDelete:s,setOpenModalDelete:t,header:a,title:i,confirmDelete:n}=e;return(0,l.jsx)("div",{children:s&&(0,l.jsx)("div",{className:"h-screen backdrop-blur-sm z-50 w-full bg-black/20 top-0 fixed",children:(0,l.jsxs)(u.l,{header:(0,l.jsxs)("div",{className:"flex gap-1 items-center text-md font-bold",children:[(0,l.jsx)(y.A,{size:20})," ",a]}),className:"bg-white p-4 rounded-md w-full md:w-[65vw] lg:w-[35vw] mx-4",visible:s,modal:!0,onHide:()=>{s&&t(!1)},children:[(0,l.jsx)("hr",{className:"mt-2 opacity-30"}),(0,l.jsxs)("div",{className:"p-2 flex gap-2 my-2",children:[(0,l.jsx)(d.A,{className:"text-md hidden sm:block ",strokeWidth:1.5}),(0,l.jsx)("p",{className:"flex gap-1 items-center text-",children:i})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-end gap-2 w-full",children:[(0,l.jsx)(x.$,{type:"submit",className:"flex justify-center items-center w-full md:w-2/12 py-1.5 bg-green-800 disabled:opacity-40 rounded-md text-white hover:bg-green-700 transition transform",label:"ยืนยัน",onClick:n}),(0,l.jsx)(x.$,{type:"submit",className:"flex justify-center items-center w-full md:w-2/12 py-1.5 bg-red-800 disabled:opacity-40 rounded-md text-white hover:bg-red-700 transition transform",label:"ยกเลิก",onClick:()=>t(!1)})]})]})})})}function k(){let[e,s]=(0,h.useState)(!0),[t,a]=(0,h.useState)(!0),[w,j]=(0,h.useState)([]),[y,k]=(0,h.useState)(null),[_,C]=(0,h.useState)(!1),[A,z]=(0,h.useState)(null),[S,R]=(0,h.useState)(null),[W,q]=(0,h.useState)(!1),[D,E]=(0,h.useState)({fullname:"",email:"",telephone_number:"",detail:""}),[$,O]=(0,h.useState)(""),[H,L]=(0,h.useState)(""),[T,M]=(0,h.useState)(!1),G=(0,h.useRef)(null),B=(0,v.useRouter)();(0,h.useEffect)(()=>{fetch("/CHANGELOG.md").then(e=>e.text()).then(e=>{O(e);let s=e.match(/## \[(.*?)\]/);s&&L(s[1])})},[]),(0,h.useEffect)(()=>{F()},[]);let F=async()=>{try{let e=await i.get("/setting/getComplaintTopics");200===e.status&&j(e.data.data)}catch(s){var e,t,l;(null===(e=s.response)||void 0===e?void 0:e.status)===503?f.oR.error("เซิร์ฟเวอร์ไม่พร้อมให้บริการ กรุณาลองใหม่ภายหลัง"):f.oR.error((null===(l=s.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.message)||"ระบบเกิดข้อผิดพลาดในขณะนี้"),j([])}finally{s(!1)}},K=async e=>{e.preventDefault();let s={...D,complaint_topic_id:y};try{let e=await i.post("/public/insertComplaint",s);200===e.status&&(f.oR.success(e.data.message),I())}catch(e){f.oR.error(e.response.data.message)}},P=e=>{e&&a(!1)},U=w.map(e=>({value:e.complaint_topic_id,label:e.complaint_topic_name})),V=()=>{C(!0),G.current&&G.current.hide()},X=async e=>{e.preventDefault();try{let e=Number(w.length),s=await i.post("/setting/insertComplaintTopics",{complaint_topic_name:A,created_by:"admin",updated_by:"admin"});200===s.status&&(C(!1),k(e+1),F(),f.oR.success(s.data.message))}catch(e){var s;f.oR.error((null===(s=e.response)||void 0===s?void 0:s.data.message)||"ระบบเกิดข้อผิดพลาดในขณะนี้")}},Z=e=>{E(s=>({...s,[e.target.name]:e.target.value}))},I=()=>{k(null),E({fullname:"",email:"",telephone_number:"",detail:""})};if(e)return(0,l.jsx)(b,{});let J=async()=>{try{let e=await i.delete("/setting/removeComplaintTopics/".concat(S.id));200===e.status&&(f.oR.success(e.data.message),q(!1),F())}catch(s){var e;f.oR.error(null===(e=s.response)||void 0===e?void 0:e.data.message)}finally{k(null),F(),G.current&&G.current.hide()}};return(0,l.jsxs)("div",{className:"flex flex-col justify-between min-h-[93vh]",children:[(0,l.jsxs)("div",{className:"flex justify-center items-center gap-1 p-2 sticky top-0 z-50 backdrop-blur-sm",children:[(0,l.jsx)("img",{className:"max-w-[60px] pointer-events-none",src:"/images/logo.png",alt:"logo",loading:"lazy"}),(0,l.jsx)("h1",{className:"font-pridi font-bold text-2xl text-green-800 select-none",children:"โรงพยาบาลอากาศอำนวย"})]}),(0,l.jsxs)("div",{className:"px-4",children:[(0,l.jsx)("div",{className:"h-1/12 my-1 mb-5 flex items-center justify-center px-2",children:(0,l.jsx)("h1",{className:"text-md md:text-lg font-semibold",children:"แบบฟอร์มรับเรื่องร้องเรียน"})}),(0,l.jsxs)("form",{className:"mx-auto flex flex-col gap-2 w-full md:w-[70vw] lg:w-[50vw] xl:w-[40vw] bg-white px-4 py-4 rounded-md shadow-xl text-sm md:text-md",onSubmit:K,children:[(0,l.jsxs)("div",{className:"flex justify-between items-center lg:my-2",children:[(0,l.jsx)("hr",{className:"w-1/4 text-gray-300"}),(0,l.jsx)("p",{className:"text-center font-bold text-lg",children:"ข้อมูลที่ต้องกรอก"}),(0,l.jsx)("hr",{className:"w-1/4 text-gray-300"})]}),(0,l.jsxs)("div",{className:"w-full items-center block md:flex",children:[(0,l.jsxs)("p",{className:"w-full md:w-4/12 flex items-center gap-1 ml-0.5",children:[(0,l.jsx)(n.A,{size:20,strokeWidth:1.5})," ชื่อ - นามสกุล"]}),(0,l.jsx)("input",{className:" my-1 rounded-md w-full text-sm md:text-md",type:"text",name:"fullname",value:D.fullname,autoComplete:"name",placeholder:"กรอกชื่อพร้อมนามสกุล",onChange:Z,required:!0})]}),(0,l.jsxs)("div",{className:"w-full items-center block md:flex",children:[(0,l.jsxs)("p",{className:"w-full md:w-4/12 flex items-center gap-1 ml-0.5",children:[(0,l.jsx)(r.A,{size:20,strokeWidth:1.5})," อีเมล"]}),(0,l.jsx)("input",{className:" my-1 rounded-md w-full text-sm md:text-md",type:"email",name:"email",value:D.email,onChange:Z,autoComplete:"email",placeholder:"กรอกที่อยู่อีเมล",required:!0})]}),(0,l.jsxs)("div",{className:"w-full items-center block md:flex",children:[(0,l.jsxs)("p",{className:"w-full md:w-4/12 flex items-center gap-1 ml-0.5",children:[(0,l.jsx)(m.A,{size:20,strokeWidth:1.5})," เบอร์โทรศัพท์"]}),(0,l.jsx)("input",{className:" my-1 rounded-md w-full text-sm md:text-md",type:"tel",name:"telephone_number",value:D.telephone_number,onChange:Z,autoComplete:"tel-national",placeholder:"กรอกหมายเลขโทรศัพท์",required:!0})]}),(0,l.jsxs)("div",{className:"w-full items-center block md:flex",children:[(0,l.jsxs)("p",{className:"w-full md:w-4/12 flex items-center gap-1 ml-0.5",children:[(0,l.jsx)(d.A,{size:20,strokeWidth:1.5}),"เรื่องร้องเรียน"]}),(0,l.jsx)(p.m,{className:" my-1 rounded-md w-full md:max-w-9/12 text-sm md:text-md text-ellipsis text-wrap",type:"text",onMouseLeave:()=>{G.current&&G.current.hide()},ref:G,placeholder:"เลือก",value:y,onChange:e=>k(e.value),options:U,panelFooterTemplate:(0,l.jsx)("div",{className:"p-2",children:(0,l.jsx)(x.$,{label:(0,l.jsxs)("div",{className:"flex justify-center items-center gap-1",children:[(0,l.jsx)(c.A,{size:17})," เพิ่มข้อมูลใหม่"]}),icon:"pi pi-plus",className:"w-full",onClick:()=>V()})}),required:!0})]}),(0,l.jsxs)("div",{className:"w-full items-start block md:flex",children:[(0,l.jsxs)("p",{className:"w-full md:w-4/12 flex items-center gap-1 ml-0.5",children:[(0,l.jsx)(o.A,{size:20,strokeWidth:1.5}),"รายละเอียด"]}),(0,l.jsx)("textarea",{className:"rounded-md w-full resize-x-none resize-y min-h my-1 min-h-11 h-24 max-h-40 text-sm md:text-md",name:"detail",value:D.detail,onChange:Z,placeholder:"รายละเอียดเพิ่มเติม",required:!0})]}),(0,l.jsx)(g(),{sitekey:"0x4AAAAAABAZxKc6ca2XALOs",onVerify:e=>P(e),className:"mx-auto lg:mx-0 w-full",theme:"light",size:"flexible"}),(0,l.jsxs)("div",{className:"flex w-full flex-col md:flex-row justify-end gap-2",children:[(0,l.jsx)(x.$,{className:"bg-green-800 disabled:opacity-40 rounded-md py-2 w-full lg:w-3/12 text-white hover:bg-green-700 transition transform",label:"ส่งข้อมูล",disabled:t}),(0,l.jsx)(x.$,{type:"button",onClick:()=>B.push("http://akathospital.com/"),className:"bg-gray-600 rounded-md py-2 w-full lg:w-3/12 text-white hover:bg-gray-700 transition transform",label:"ยกเลิก"})]})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 items-center justify-center my-2 px-5 select-none",children:[(0,l.jsx)("label",{className:"text-xs text-center line-clamp-1 copyright-text",children:"\xa9 Copyright 2025 โรงพยาบาลอากาศอำนวย | พัฒนาโดย : กลุ่มงานสุขภาพดิจิทัลโรงพยาบาลอากาศอำนวย"}),(0,l.jsxs)("label",{onClick:()=>M(!0),className:"text-xs hover:cursor-pointer",children:["เวอร์ชั่นปัจจุบัน ",H]})]}),T&&(0,l.jsx)("div",{className:"bg-black/20 z-50 w-full backdrop-blur-xs h-screen fixed top-0",children:(0,l.jsxs)(u.l,{header:(0,l.jsx)("p",{className:"font-semibold text-lg",children:"ข้อมูลการอัพเดท"}),visible:T,onHide:()=>M(!1),className:"bg-white p-4 shadow rounded overflow-y-auto w-[65vw] sm:w-[55vw] md:w-[45vw] lg:w-[35vw] xl:w-[25vw] h-[42vh]",children:[(0,l.jsx)("hr",{className:" opacity-25 my-2"}),(0,l.jsx)("pre",{className:"whitespace-pre-wrap font-sans",children:$})]})}),_&&(0,l.jsx)("div",{className:"h-screen backdrop-blur-xs z-50 w-full bg-black/20 top-0 fixed",children:(0,l.jsxs)(u.l,{header:(0,l.jsxs)("div",{className:"flex gap-1 items-center text-md font-bold",children:[(0,l.jsx)(c.A,{size:20})," เพิ่มข้อมูลใหม่"]}),className:"bg-white p-4 rounded-md w-full md:w-[70vw] lg:w-[40vw] mx-4",visible:_,onHide:()=>{_&&C(!1)},children:[(0,l.jsx)("hr",{className:"mt-2 opacity-30"}),(0,l.jsxs)("form",{className:"my-4 px-2",onSubmit:X,children:[(0,l.jsxs)("p",{className:"flex gap-1 items-center text-",children:[(0,l.jsx)(d.A,{size:20,strokeWidth:1.5})," ชื่อหัวข้อที่ต้องการเพิ่ม"]}),(0,l.jsx)("input",{className:" my-1 rounded-md w-full text-sm md:text-md mb-6",type:"text",name:"complaint_topic_name",id:"complaint_topic_name",autoComplete:"off",placeholder:"หัวข้อที่ต้องการเพิ่ม",onChange:e=>z(e.target.value),required:!0}),(0,l.jsx)(x.$,{type:"submit",className:"flex justify-center items-center w-full py-1.5 bg-green-800 disabled:opacity-40 rounded-md text-white hover:bg-green-700 transition transform",label:"บันทึกหัวข้อ"})]})]})}),(0,l.jsx)(N,{openModalDelete:W,setOpenModalDelete:q,header:"ยืนยันการลบข้อมูล",title:"คุณต้องการลบ ".concat(S&&S.label," หรือไม่"),value:S,confirmDelete:J})]})}},5543:(e,s,t)=>{Promise.resolve().then(t.bind(t,3924))}},e=>{var s=s=>e(e.s=s);e.O(0,[422,655,441,684,358],()=>s(5543)),_N_E=e.O()}]);